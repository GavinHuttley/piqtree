diff --git a/utils/tools.cpp b/utils/tools.cpp
index 61b9d083..7ce6ac13 100644
--- a/utils/tools.cpp
+++ b/utils/tools.cpp
@@ -73,7 +73,11 @@ void outError(const char *error, bool quit) {
 	}
 	cerr << error << endl;
     if (quit)
+    #ifndef BUILD_LIB
     	exit(2);
+    #else
+        throw runtime_error(error);
+    #endif
 }
 
 /**
